# 卒業制作 開発計画書
### Webアプリの概要
本サービスは、ユーザーが「誰に」「どの服で」会ったかの実績を簡単に記録・管理することを可能にします。
次に同じ人と会う際、システムが過去の着用履歴を自動でチェックし、重複しているアイテムに警告を表示。
服選びの不安を軽減し、常に新鮮な第一印象を保つことをサポートします。

### 1週間辺りの開発に向けられる時間
- 1週間あたり：25時間

### ProjectsのURL
[https://github.com/users/Ery-15itie/projects/4/views/1?sumFields=%5B231156121%5D&hideItemsCount=false&sortedBy%5Bdirection%5D=asc&sortedBy%5BcolumnId%5D=Status](https://github.com/users/Ery-15itie/projects/4/views/1?sumFields=%5B231156121%5D&hideItemsCount=false&sortedBy%5Bdirection%5D=asc&sortedBy%5BcolumnId%5D=Status)

### MVPまでの開発の流れ一覧(全24ステップ)
※実装の技術的なつながり、issueの読みやすさを考慮して敢えて複数機能をまとめている部分があります。
本計画書ではエラー発生も想定して予備期間を組んでいますが、看板からは削除しています

1. Rails new と基本的な環境構築　(SP:2)
2. トップページ(静的ページ)の作成とルーティング(SP:3)
3. Render環境設定と初期デプロイ(SP:3)
4. ユーザー登録機能の実装(SP:3)
5. ユーザーログイン機能の実装(SP:3)
6. ユーザーログアウト機能の実装(SP:3)
(7. 予備期間① 認証基盤のバグ修正(SP:5))
8. アイテム・カテゴリモデルの作成と関連付け(SP:3)
9. 新規アイテム登録機能の実装(SP:3)
10. アイテム一覧・詳細表示の実装(SP:3)
11. アイテムの更新・削除機能の実装(SP:3)
(12. 予備期間② アイテムCRUDの動作確認(SP:3))
13. スケジュール/会う相手/着用済みモデルの作成(SP:3)
14. 会う相手（Contact）の登録・一覧・詳細の実装 (CR)(SP:3)
15. 会う相手（Contact）の更新・削除の実装 (UD)(SP:2)
(16. 予備期間③中間動作確認(SP:2))
17. 着用記録フォームの実装（相手・アイテム選択）(SP:3)
18. 着用実績の登録機能実装（多対多の保存ロジック）(SP:3)
19. 着用アイテムの相手別重複チェックロジックの実装(SP:3)
20. 実績一覧表示と重複チェック結果の表示(SP:3)
(21. 予備期間④ MVPリリースに向けたロジック確認(SP:5))
22. 最低限の法的要件（利用規約等）の明示(SP:3)
23. 最終機能安定化、バグ修正(SP:8)
24. MVPリリース(SP:8)

**■開発工程を作成した上でのポイント**

この開発計画ではMVPの核となる価値提供を最優先しつつ、予備期間を適切に配置することでリスク管理と品質維持を両立させることを重視して策定しました。

1.  MVPの核機能の早期確定と集中
プロジェクトの成功を左右する最も重要な機能を特定し、それ以外の要素は徹底的に排除しました。

 * 核機能の特定: アイテムCRUDと相手別の重複チェックロジックにスコープを集中させました。
 * 「価値」の可視化を優先: 重複チェックのロジック（Step 19）と、それをUIに反映する機能（Step 20）を、他の機能（例: 検索や画像）よりも優先し、Week 9までに完了させることで、早期にサービスの価値をユーザーに提示できるようにしました。

2. リスク分散とバッファ戦略

計画の途中にバッファ期間を意図的に組み込むことで、リスクを管理し、開発の安定性を高めています。
 
3. 論理的な機能分割と依存関係の明確化

機能の実装順序を厳密に設定し、依存関係を明確にすることで、手戻りを防いでいます。
   * 認証基盤（Step 1〜6）
   * アイテムCRUD（Step 8〜11）
   * Contact CRUD（Step 14〜15）
   * 実績データ基盤（Step 17~）

### 実装に時間がかかる部分と対応策
間違いなく時間がかかるのはStep18とStep19です。この実装について解説します。

- Step18着用実績の登録機能実装（多対多の保存ロジック）について

Step 18 は、フォームから送られたデータ（相手、日付、複数の服）を、3つのテーブル（Schedules、Contacts、Actual_outfits）に同時に、安全に書き込む作業です。実装は以下のように考えています。やる作業が多く感じますがこのステップは「トランザクション」という単一の技術要素に依存しており、他の機能との依存性は低い（Step 17のフォーム入力にのみ依存）です。標準的な Railsの多対多の保存パターン（has_many through）に従うことで、ロジック設計の迷いを排除し、期間内に完了させる見込みでissueを立てています。

| フェーズ | 作業内容 | 期間内完了のためのポイント |
|---|---|---|
| パラメータの取得 | フォームから送られた contact_id、date、そして特に重要な item_ids (配列) を SchedulesController#create で受け取ります。 | Railsの強力なストロングパラメータ機能を利用し、item_ids: [] の形式で配列を安全に受け取る設定を迅速に行います。 |
| トランザクション処理 | データベースの整合性を保証するため、ActiveRecord::Base.transaction do ... end ブロック内で全ての保存処理を実行します。 | トランザクションの使用は複雑ですが、必須です。処理を始める前にこのブロックを記述し、失敗時のロールバック（全て取り消し）を確実に動作させます。 |
| Schedule の作成 | contact_id と date を使って、親となる Schedule レコードを作成し、is_completed: true（実績済みフラグ）を設定します。 | 先に親レコードを保存し、その ID を次の Actual_outfits の作成に利用する標準的な流れで進めます。 |
| Actual_outfits の作成 | 作成された Schedule インスタンスと、フォームから受け取った複数の item_id を使って、中間テーブルにレコードを一括で作成します。 | Schedule.actual_outfits.create!(item_id: [ID]) のようなリレーションを利用したシンプルなループ処理を採用し、SQLを意識しすぎずRailsの機能を活用します。 |

- Step19:着用アイテムの相手別重複チェックロジックの実装

ここはアプリの核となるロジック部分で時間がかかるため、直後にバッファ期間を設定しています。パフォーマンス重視の以下の設計戦略を取る予定です。

| フェーズ | 作業内容 | 期間内完了のためのポイント |
|---|---|---|
| モデルリレーションの最終確認 | User \to Contacts \to Schedules \to Actual_outfits \to Items のリレーション定義が全て正しく、belongs_to/has_manyが双方向で定義されているかを再確認します。 | まずは既存のモデル定義にバグがないかを再確認することが、最も手戻りを減らす近道と考えています。 |
| 単一クエリの設計（鍵となる作業） | 特定の Contact ID を引数に取り、過去に着用された全 Item の ID を取得するメソッドを、Contact モデル内に実装します。 | joins や has_many :through を使用し、データベースに対するクエリ回数が1回（N+1問題の回避）で済むよう、複雑なSQLではなくActiveRecordのメソッドチェーンで記述します。 |
| 結果の整形 | 取得した Item ID のリストを、次の UI ステップ（Step 20）で使いやすいよう、シンプルに [1, 5, 8, ...] のような配列として返します。 | ロジックの複雑化を避けるため、このステップでは「最終着用日」の取得は含めず、「着用済みIDのリスト」作成に絞ります。 |

### MVPリリースまでに実装する機能
本アプリケーションにおいて、MVPリリースまでに実装されるアプリケーションの価値をユーザーに届けるための主要な機能は以下の4つの大きな柱で構成されます。これらの機能が完成することで、ユーザーは「誰と、いつ、どの服で会ったか」というサービスの核心的な体験が可能になります。

​1. 認証と基盤
- [ ] ユーザ登録
- [ ] ログイン
- [ ] ログアウト
- [ ] トップページの表示

​2. アイテム管理
- [ ] アイテムの新規登録
- [ ] アイテムの一覧表示
- [ ] アイテムの詳細表示
- [ ] アイテムの編集（更新）
- [ ] アイテムの削除（論理削除）
- [ ] カテゴリの作成と紐付け

​3. 会う相手（Contact）管理機能
- [ ] 会う相手の新規登録
- [ ] 一覧、詳細表示
- [ ] 更新、削除機能
- [ ] 予定の新規登録

4. MVPの核となる重複チェック機能
- [ ] データ基盤構築: 着用実績（Schedules）、中間テーブル（Actual_outfits）のモデル構築。
- [ ] 実績登録フォーム: 会う相手と着用アイテムを複数選択できる記録フォームの実装。
- [ ] 実績登録ロジック: 多対多のデータをトランザクションで確実に保存する機能。
- [ ] 重複チェックロジック: 特定の相手に対して、過去に着用したアイテムを識別するロジックの実装。
- [ ] 重複警告UI: 実績登録フォームで、過去に着用済みのアイテムに視覚的な警告を表示する機能。
- [ ] 実績一覧表示: 過去の着用実績を時系列で確認できる機能。

### MVP後
1. UX向上とデータ活用（アイテム管理・可視化）

アイテム画像機能:
- [ ] アイテム登録・編集時の画像アップロード
- [ ] アイテム詳細・一覧画面での画像表示
- [ ] データ活用/ダッシュボード:
- [ ] 着用頻度の統計情報表示
- [ ] アイテムごとの最終着用日に基づく期間表示
- [ ] 検索・フィルタ機能:
- [ ] アイテム一覧での詳細フィルタ（カテゴリ、色など）
- [ ] アイテム一覧でのソート機能（着用頻度順、登録日順など）

​メンテナンス機能:
- [ ] 洗濯サイクルの登録（例: 5回着用したら洗濯するなど）
- [ ] 洗濯が必要なアイテムの通知・一覧表示

​2. セキュリティと運用

​認証機能の強化:
- [ ] パスワードを忘れた際のリセット機能（メール送信含む）
- [ ] ログイン後のパスワード更新機能
- [ ] SNSログイン（Google/LINEなど）のアカウント連携・登録

​通知・連絡機能:
- [ ] お問い合わせフォームの作成（ユーザー入力受付）
- [ ] お問い合わせ内容のメール送信機能
- [ ] スケジュールリマインダーなどのLINE通知機能

​3. 品質とインフラ

​デザインと操作性:
- [ ] スマートフォン・タブレットへのレスポンシブデザイン本格対応

​品質保証:
- [ ] RSpecによるテスト

​ブランドと運用:
- [ ] サービスの独自ドメイン設定

### MVPレビュー依頼予定日
予定日：2026年 2月 28日(卒業期限2026年 4月 21日)
